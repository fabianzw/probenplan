{% load static %}
{% load tz %}
{% load probenplan %}

<!DOCTYPE html>
<html lang="de">
<head>
  {% include 'core/partials/head.html' %}
</head>
<body class="{% if black_and_white %}bw{% endif %}">
{% include 'core/partials/header.html' %}
{% include 'core/partials/controls.html' %}
<hr/>
<table class="table">
  <thead>
  <tr>
    <th class="date-cell" scope="col">
      <div>Datum</div>
    </th>
    <th class="time-cell" scope="col">
      <div>Uhrzeit</div>
    </th>
    <th class="event-cell" scope="col">
      <div>Titel/Ort</div>
    </th>
    <th class="description-cell" scope="col">
      <div>Anmerkungen</div>
    </th>
  </tr>
  </thead>
  <tbody>
  {% for event_list in events %}
    {% ifchanged %}
      <tr class="year-row">
        <th colspan="4"><h4>Termine in {{ event_list.day|date:'Y' }}</h4></th>
      </tr>
    {% endifchanged %}
    {% for event in event_list.events %}
      <tr class="{% if forloop.first %}line {% endif %}">
        {% if forloop.first %}
          <th rowspan="{{ event_list.events|length }}" scope="row" class="date-cell">
            <div class="event-date">
              {{ event_list.day|date:'j. M' }}
            </div>
          </th>
        {% endif %}
        {% if event.all_day %}
          <td class="time-cell">
            <div class="event-time"><i>ganztägig</i></div>
          </td>
        {% else %}
          <td class="time-cell">
            <div class="event-time">{{ event.begin|time:'H:i' }} – {{ event.end|date:'H:i' }}</div>
          </td>
        {% endif %}
        <td valign="middle" class="event-cell">
          <div class="event">
            <div class="title">
              {% for color in event|color_tags %}
                <span class="{{ color }} dot"></span>
              {% endfor %}
              {{ event.title }}
            </div>
            <small class="location">
              {{ event.location|location }}
            </small>
          </div>
        </td>
        <td class="description-cell">
          <div class="event-description">{{ event.description }}</div>
        </td>
      </tr>
    {% endfor %}
  {% endfor %}
  </tbody>
</table>
</body>
</html>
