{% load static %}
{% load tz %}

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">
  <link rel="stylesheet" href="{% static 'core/custom.css' %}">
  <title>Probenplan des LJO Hamburg (Stand {% now "j.n.Y" %})</title>
</head>
<body>
<header class="header">
  <div>
    <h1>Probenplan des LJO Hamburg</h1>
    <div>Stand vom {% now "j.n.Y" %}</div>
  </div>
  <img src="https://ljo-hamburg.de/wp-content/uploads/2019/06/ljo-logo-png.png" alt="LJO-Logo" width="240">
</header>
<hr/>
<table class="table">
  <thead>
  <tr>
    <th id="date-heading" scope="col">
      <div>Datum</div>
    </th>
    <th id="time-heading" scope="col">
      <div>Uhrzeit</div>
    </th>
    <th id="name-heading" scope="col">
      <div>Probe</div>
    </th>
    <th id="description-heading" scope="col">
      <div>Anmerkungen</div>
    </th>
  </tr>
  </thead>
  <tbody>
  {% for day_events in events %}
    {% for event in day_events.events %}
      {% if forloop.first %}
        <tr class="line {% if event.all_day and day_events.has_timed_events %}secondary{% endif %}">
          <th rowspan="{{ day_events.events|length }}" scope="row">
            <div>
              {{ day_events.day|date:'j. M Y' }}
            </div>
          </th>
          {% else %}
        <tr class="{% if event.all_day and day_events.has_timed_events %}secondary{% endif %}">
      {% endif %}
    {% if event.all_day %}
      <td class="date-cell">
        <div class="event-date"><i>ganztägig</i></div>
      </td>
    {% else %}
      <td class="date-cell">
        <div class="event-date">{{ event.begin|time:'H:i' }} – {{ event.end|date:'H:i' }}</div>
      </td>
    {% endif %}
    <td valign="middle">
      <div class="event">
        <div class="event-title">{{ event.title }}</div>
        <small class="event-location">
          {{ event.location }}
        </small>
      </div>
    </td>
    <td>
      <div>{{ event.description|safe }}</div>
    </td>
    </tr>
    {% endfor %}
  {% endfor %}
  </tbody>
</table>
</body>
</html>